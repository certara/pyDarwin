<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API &mdash; pyDarwin 1.1.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Glossary" href="Glossary.html" />
    <link rel="prev" title="Options List" href="Options.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pyDarwin
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">About:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Algorithms.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Releases.html">Releases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="Options.html">Options List</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#high-level-functions">High level functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-search">run_search</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.run_search.run_search"><code class="docutils literal notranslate"><span class="pre">run_search()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#run-search-in-folder">run_search_in_folder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.run_search_in_folder.run_search_in_folder"><code class="docutils literal notranslate"><span class="pre">run_search_in_folder()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#algorithms">Algorithms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.algorithms.exhaustive">exhaustive</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.algorithms.exhaustive.run_exhaustive"><code class="docutils literal notranslate"><span class="pre">run_exhaustive()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.algorithms.GA">GA</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.algorithms.GA.run_ga"><code class="docutils literal notranslate"><span class="pre">run_ga()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.algorithms.OPT">OPT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.algorithms.OPT.run_skopt"><code class="docutils literal notranslate"><span class="pre">run_skopt()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.algorithms.run_downhill">downhill</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.algorithms.run_downhill.run_downhill"><code class="docutils literal notranslate"><span class="pre">run_downhill()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#model-classes">Model classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.Template">darwin.Template</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.Template.Template"><code class="docutils literal notranslate"><span class="pre">Template</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.Model">darwin.Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.Model.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.ModelCode">darwin.ModelCode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelCode.ModelCode"><code class="docutils literal notranslate"><span class="pre">ModelCode</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.ModelResults">darwin.ModelResults</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelResults.ModelResults"><code class="docutils literal notranslate"><span class="pre">ModelResults</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.ModelRun">darwin.ModelRun</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelRun.ModelRun"><code class="docutils literal notranslate"><span class="pre">ModelRun</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelRun.write_best_model_files"><code class="docutils literal notranslate"><span class="pre">write_best_model_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelRun.run_to_json"><code class="docutils literal notranslate"><span class="pre">run_to_json()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelRun.json_to_run"><code class="docutils literal notranslate"><span class="pre">json_to_run()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.Population">darwin.Population</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.Population.Population"><code class="docutils literal notranslate"><span class="pre">Population</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#caching-model-runs">Caching model runs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.ModelCache">darwin.ModelCache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelCache.ModelCache"><code class="docutils literal notranslate"><span class="pre">ModelCache</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelCache.set_model_cache"><code class="docutils literal notranslate"><span class="pre">set_model_cache()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelCache.get_model_cache"><code class="docutils literal notranslate"><span class="pre">get_model_cache()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelCache.register_model_cache"><code class="docutils literal notranslate"><span class="pre">register_model_cache()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#darwin.ModelCache.create_model_cache"><code class="docutils literal notranslate"><span class="pre">create_model_cache()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-darwin.MemoryModelCache">darwin.MemoryModelCache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#darwin.MemoryModelCache.MemoryModelCache"><code class="docutils literal notranslate"><span class="pre">MemoryModelCache</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#darwin.MemoryModelCache.AsyncMemoryModelCache"><code class="docutils literal notranslate"><span class="pre">AsyncMemoryModelCache</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#darwin.MemoryModelCache.register"><code class="docutils literal notranslate"><span class="pre">register()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="Troubleshooting.html">Troubleshooting</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyDarwin</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">API</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this heading">¶</a></h1>
<section id="high-level-functions">
<h2>High level functions<a class="headerlink" href="#high-level-functions" title="Permalink to this heading">¶</a></h2>
<section id="run-search">
<h3>run_search<a class="headerlink" href="#run-search" title="Permalink to this heading">¶</a></h3>
<span class="target" id="module-darwin.run_search"><span id="darwin-run-search"></span></span><dl class="py function">
<dt class="sig sig-object py" id="darwin.run_search.run_search">
<span class="sig-prename descclassname"><span class="pre">darwin.run_search.</span></span><span class="sig-name descname"><span class="pre">run_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokens_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></span><a class="headerlink" href="#darwin.run_search.run_search" title="Permalink to this definition">¶</a></dt>
<dd><p>The run_search function runs the algorithm selected in options_file, based on template_file and tokens_file.
At the end, writes best control and output file to project_dir (specified in options_file).
options_file path name should, in general, be absolute, other file names can be absolute path
or path relative to the project_dir.
Returns the final model object.</p>
</dd></dl>

</section>
<section id="run-search-in-folder">
<h3>run_search_in_folder<a class="headerlink" href="#run-search-in-folder" title="Permalink to this heading">¶</a></h3>
<span class="target" id="module-darwin.run_search_in_folder"><span id="darwin-run-search-in-folder"></span></span><dl class="py function">
<dt class="sig sig-object py" id="darwin.run_search_in_folder.run_search_in_folder">
<span class="sig-prename descclassname"><span class="pre">darwin.run_search_in_folder.</span></span><span class="sig-name descname"><span class="pre">run_search_in_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'template.txt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokens_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'tokens.json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'options.json'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></span><a class="headerlink" href="#darwin.run_search_in_folder.run_search_in_folder" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>
<section id="algorithms">
<h2>Algorithms<a class="headerlink" href="#algorithms" title="Permalink to this heading">¶</a></h2>
<section id="module-darwin.algorithms.exhaustive">
<span id="exhaustive"></span><h3>exhaustive<a class="headerlink" href="#module-darwin.algorithms.exhaustive" title="Permalink to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="darwin.algorithms.exhaustive.run_exhaustive">
<span class="sig-prename descclassname"><span class="pre">darwin.algorithms.exhaustive.</span></span><span class="sig-name descname"><span class="pre">run_exhaustive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.Template.Template" title="darwin.Template.Template"><span class="pre">Template</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></span><a class="headerlink" href="#darwin.algorithms.exhaustive.run_exhaustive" title="Permalink to this definition">¶</a></dt>
<dd><p>Run full exhaustive search on the Template, all possible combinations.
All models will be run in iteration number 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>model_template</strong> (<a class="reference internal" href="#darwin.Template.Template" title="darwin.Template.Template"><em>Template</em></a>) – Model Template</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns final/best model run</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun">ModelRun</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-darwin.algorithms.GA">
<span id="ga"></span><h3>GA<a class="headerlink" href="#module-darwin.algorithms.GA" title="Permalink to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="darwin.algorithms.GA.run_ga">
<span class="sig-prename descclassname"><span class="pre">darwin.algorithms.GA.</span></span><span class="sig-name descname"><span class="pre">run_ga</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.Template.Template" title="darwin.Template.Template"><span class="pre">Template</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></span><a class="headerlink" href="#darwin.algorithms.GA.run_ga" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the Genetic Algorithm (GA) search, using the DEAP (<a class="reference external" href="https://github.com/deap/deap">https://github.com/deap/deap</a>) packages.
The template object includes the control file template and all the token groups.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>model_template</strong> (<a class="reference internal" href="#darwin.Template.Template" title="darwin.Template.Template"><em>Template</em></a>) – Template object for the search</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The single best model from the search</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#darwin.Model.Model" title="darwin.Model.Model">Model</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-darwin.algorithms.OPT">
<span id="opt"></span><h3>OPT<a class="headerlink" href="#module-darwin.algorithms.OPT" title="Permalink to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="darwin.algorithms.OPT.run_skopt">
<span class="sig-prename descclassname"><span class="pre">darwin.algorithms.OPT.</span></span><span class="sig-name descname"><span class="pre">run_skopt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.Template.Template" title="darwin.Template.Template"><span class="pre">Template</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></span><a class="headerlink" href="#darwin.algorithms.OPT.run_skopt" title="Permalink to this definition">¶</a></dt>
<dd><p>Run one of the scikit optimize algorithms (GP, RF, GBRT). See <a class="reference external" href="https://scikit-optimize.github.io/stable/">https://scikit-optimize.github.io/stable/</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>model_template</strong> (<a class="reference internal" href="#darwin.Template.Template" title="darwin.Template.Template"><em>Template</em></a>) – Model template to be run</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The best model from search</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#darwin.Model.Model" title="darwin.Model.Model">Model</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-darwin.algorithms.run_downhill">
<span id="downhill"></span><h3>downhill<a class="headerlink" href="#module-darwin.algorithms.run_downhill" title="Permalink to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="darwin.algorithms.run_downhill.run_downhill">
<span class="sig-prename descclassname"><span class="pre">darwin.algorithms.run_downhill.</span></span><span class="sig-name descname"><span class="pre">run_downhill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.Template.Template" title="darwin.Template.Template"><span class="pre">Template</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">pop</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.Population.Population" title="darwin.Population.Population"><span class="pre">Population</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#darwin.algorithms.run_downhill.run_downhill" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the downhill step, with full (2 bit) search if requested.
Finds N &lt;= <a class="reference internal" href="Options.html#num-niches-options-desc"><span class="std std-ref">num_niches</span></a> niches in pop and replaces N worst models in pop
with best models from the niches.
If <em>return_all</em> is true, will return a list of ALL models.</p>
</dd></dl>

</section>
</section>
<section id="model-classes">
<h2>Model classes<a class="headerlink" href="#model-classes" title="Permalink to this heading">¶</a></h2>
<section id="module-darwin.Template">
<span id="darwin-template"></span><h3>darwin.Template<a class="headerlink" href="#module-darwin.Template" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="darwin.Template.Template">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">darwin.Template.</span></span><span class="sig-name descname"><span class="pre">Template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokens_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.Template.Template" title="Permalink to this definition">¶</a></dt>
<dd><p>The Template object contains information common to all the model objects, including the template code
(from the template file) and the tokens set. It DOES NOT include any model specific information,
such as the phenotype, the control file text, or any of the output results from NONMEM.
Other housekeeping functions are performed, such as defining the gene structure (by counting the number of
token groups for each token set), parsing out the THETA/OMEGA/SIGMA blocks, and counting
the number of fixed/non-searched THETAs/OMEGAs/SIGMAs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template_file</strong> (<em>str</em>) – Path to the plain ascii text template file</p></li>
<li><p><strong>tokens_file</strong> – Path to the json tokens file</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="darwin.Template.Template.any_block_diag">
<span class="sig-name descname"><span class="pre">any_block_diag</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.Template.Template.any_block_diag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-darwin.Model">
<span id="darwin-model"></span><h3>darwin.Model<a class="headerlink" href="#module-darwin.Model" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="darwin.Model.Model">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">darwin.Model.</span></span><span class="sig-name descname"><span class="pre">Model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.ModelCode.ModelCode" title="darwin.ModelCode.ModelCode"><span class="pre">ModelCode</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.Model.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>The full model, used for GA, GP, RF, GBRF and exhaustive search.</p>
<p>Model instantiation takes a template as an argument, along with the model code, model number,
and generation. Functions include constructing the control file, executing the control file,
calculating the fitness/reward.</p>
<dl class="simple">
<dt>model_code<span class="classifier">a ModelCode object</span></dt><dd><p>Contains the bit string/integer string representation of the model. Includes the full binary string,
integer string, and minimal binary representation of the model (for GA, GP/RF/GBRT and downhill, respectively).</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="darwin.Model.Model.genotype">
<span class="sig-name descname"><span class="pre">genotype</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#darwin.Model.Model.genotype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.Model.Model.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.Model.Model.to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.Model.Model.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.Model.Model.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-darwin.ModelCode">
<span id="darwin-modelcode"></span><h3>darwin.ModelCode<a class="headerlink" href="#module-darwin.ModelCode" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="darwin.ModelCode.ModelCode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">darwin.ModelCode.</span></span><span class="sig-name descname"><span class="pre">ModelCode</span></span><a class="headerlink" href="#darwin.ModelCode.ModelCode" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for model code, just to keep straight whether this is full binary, minimal binary, or integer
and to interconvert between them.</p>
<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelCode.ModelCode.from_full_binary">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_full_binary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gene_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelCode.ModelCode.from_full_binary" title="Permalink to this definition">¶</a></dt>
<dd><p>Create ModelCode object from “full binary”</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelCode.ModelCode.from_min_binary">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_min_binary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gene_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelCode.ModelCode.from_min_binary" title="Permalink to this definition">¶</a></dt>
<dd><p>Create ModelCode object from “minimal binary”</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelCode.ModelCode.from_int">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gene_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelCode.ModelCode.from_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Create ModelCode object from integers</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-darwin.ModelResults">
<span id="darwin-modelresults"></span><h3>darwin.ModelResults<a class="headerlink" href="#module-darwin.ModelResults" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="darwin.ModelResults.ModelResults">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">darwin.ModelResults.</span></span><span class="sig-name descname"><span class="pre">ModelResults</span></span><a class="headerlink" href="#darwin.ModelResults.ModelResults" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelResults.ModelResults.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelResults.ModelResults.to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelResults.ModelResults.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelResults.ModelResults.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelResults.ModelResults.calc_fitness">
<span class="sig-name descname"><span class="pre">calc_fitness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.Model.Model" title="darwin.Model.Model"><span class="pre">Model</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelResults.ModelResults.calc_fitness" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the fitness, based on the model output, and the penalties (from the options file).</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-darwin.ModelRun">
<span id="darwin-modelrun"></span><h3>darwin.ModelRun<a class="headerlink" href="#module-darwin.ModelRun" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="darwin.ModelRun.ModelRun">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">darwin.ModelRun.</span></span><span class="sig-name descname"><span class="pre">ModelRun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.Model.Model" title="darwin.Model.Model"><span class="pre">Model</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adapter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ModelEngineAdapter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelRun.ModelRun" title="Permalink to this definition">¶</a></dt>
<dd><dl id="model-run-generation">
<dt>generation<span class="classifier">int</span></dt><dd><p>The current generation/iteration.</p>
<p>Generation + model_num creates a unique “file_stem”</p>
</dd>
</dl>
<dl id="model-run-num">
<dt>model_num: int</dt><dd><p>Model number within the generation.</p>
<p>Generation + model_num creates a unique “file_stem”</p>
</dd>
</dl>
<dl class="simple" id="model-run-stem">
<dt>file_stem: string</dt><dd><p>Prefix string used to create unique names for control files, executable, and run directory.
Defined as stem_prefix + generation + model_num.</p>
</dd>
<dt>control_file_name: string</dt><dd><p>Name of the control file, will be  file_stem + “.mod”</p>
</dd>
<dt>executable_file_name: string</dt><dd><p>Name of the executable, will be file_stem + “.exe”</p>
</dd>
</dl>
<dl class="simple" id="model-run-dir">
<dt>run_dir: string</dt><dd><p>Path to the directory where the model is run;
run_dir name is based on the file_stem, which must be unique for each model in the search.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelRun.ModelRun.is_duplicate">
<span class="sig-name descname"><span class="pre">is_duplicate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#darwin.ModelRun.ModelRun.is_duplicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the run is a duplicate of another run in the same population.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelRun.ModelRun.started">
<span class="sig-name descname"><span class="pre">started</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#darwin.ModelRun.ModelRun.started" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the run has been started.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelRun.ModelRun.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelRun.ModelRun.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Assembles what goes into the JSON file of saved models.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelRun.ModelRun.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelRun.ModelRun.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelRun.ModelRun.check_files_present_impl">
<span class="sig-name descname"><span class="pre">check_files_present_impl</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelRun.ModelRun.check_files_present_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelRun.ModelRun.run_model">
<span class="sig-name descname"><span class="pre">run_model</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelRun.ModelRun.run_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the model. Will terminate model if the timeout option (model_run_timeout) is exceeded.
After model is run, the post run R code and post run Python code (if used) are run, and
the calc_fitness function is called to calculate the fitness/reward.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelRun.ModelRun.cleanup">
<span class="sig-name descname"><span class="pre">cleanup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelRun.ModelRun.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all unneeded files after run.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelRun.ModelRun.output_results">
<span class="sig-name descname"><span class="pre">output_results</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelRun.ModelRun.output_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints results to output (.lst) file.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darwin.ModelRun.write_best_model_files">
<span class="sig-prename descclassname"><span class="pre">darwin.ModelRun.</span></span><span class="sig-name descname"><span class="pre">write_best_model_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#darwin.ModelRun.write_best_model_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the current best model control and output in control_path and result_path, respectively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>control_path</strong> – Path to current best model control file</p></li>
<li><p><strong>result_path</strong> – Path to current best model result file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darwin.ModelRun.run_to_json">
<span class="sig-prename descclassname"><span class="pre">darwin.ModelRun.</span></span><span class="sig-name descname"><span class="pre">run_to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelRun.run_to_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darwin.ModelRun.json_to_run">
<span class="sig-prename descclassname"><span class="pre">darwin.ModelRun.</span></span><span class="sig-name descname"><span class="pre">json_to_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></span><a class="headerlink" href="#darwin.ModelRun.json_to_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-darwin.Population">
<span id="darwin-population"></span><h3>darwin.Population<a class="headerlink" href="#module-darwin.Population" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="darwin.Population.Population">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">darwin.Population.</span></span><span class="sig-name descname"><span class="pre">Population</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.Template.Template" title="darwin.Template.Template"><span class="pre">Template</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_iteration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.Population.Population" title="Permalink to this definition">¶</a></dt>
<dd><p>Population of individuals (model runs).</p>
<dl class="py method">
<dt class="sig sig-object py" id="darwin.Population.Population.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.Template.Template" title="darwin.Template.Template"><span class="pre">Template</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_iteration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.Population.Population.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an empty population.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Population name. Will be used as generation for every ModelRun added to this population.
If an integer is specified, the name is formatted respectively to max_iteration (filled with leading
zeroes, if needed). Otherwise, it’s just converted to a string.</p></li>
<li><p><strong>start_number</strong> – Starting model number of this population.</p></li>
<li><p><strong>max_number</strong> – Maximum model number of entire <strong>iteration</strong>. Used for formatting model number. Note that
iteration may contain multiple populations (see exhaustive search).</p></li>
<li><p><strong>max_iteration</strong> – Maximum iteration number. Used for formatting population name.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.Population.Population.from_codes">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_codes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.Template.Template" title="darwin.Template.Template"><span class="pre">Template</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">codes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code_converter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_iteration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.Population.Population.from_codes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new population from a set of codes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.Population.Population.add_model_run">
<span class="sig-name descname"><span class="pre">add_model_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.ModelCode.ModelCode" title="darwin.ModelCode.ModelCode"><span class="pre">ModelCode</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.Population.Population.add_model_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new ModelRun and append it to <em>self.runs</em>.
If a ModelRun with such code already exists in <em>self.runs</em>, the new one will be marked as a duplicate and
will not be run. If the code is found in the cache, ModelRun will be restored from there and will not be run.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.Population.Population.get_best_run">
<span class="sig-name descname"><span class="pre">get_best_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></span><a class="headerlink" href="#darwin.Population.Population.get_best_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the best run (the run with the least fitness among entire population).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.Population.Population.get_best_runs">
<span class="sig-name descname"><span class="pre">get_best_runs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#darwin.Population.Population.get_best_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get n best runs of entire population.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.Population.Population.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.Population.Population.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the population - pass all runs to current run manager.
There is no return value, the runs are just updated.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="caching-model-runs">
<span id="api-model-cache"></span><h2>Caching model runs<a class="headerlink" href="#caching-model-runs" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line">Duplicate models are commonly encountered during search. To prevent unnecessary runs, all unique models from current search are stored in Model Cache.</div>
<div class="line">Every new model is checked against the cache. If a match is found, the new model is replaced with cached one, so the result is obtained instantly.</div>
<div class="line">Currently, only in-memory cache is available, so with large searches (millions of model runs), the memory footprint may be substantial.</div>
<div class="line">Normally the cache is dumped at the end of every iteration or when you <a class="reference internal" href="Usage.html#stop-search"><span class="std std-ref">stop the search</span></a>. This behaviour can be affected
by <a class="reference internal" href="Options.html#saved-models-readonly-options-desc"><span class="std std-ref">saved_models_readonly</span></a> being set to true. You also can load the cache from a <a class="reference internal" href="Options.html#use-saved-models-options-desc"><span class="std std-ref">saved state</span></a>.</div>
</div>
<section id="module-darwin.ModelCache">
<span id="darwin-modelcache"></span><h3>darwin.ModelCache<a class="headerlink" href="#module-darwin.ModelCache" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="darwin.ModelCache.ModelCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">darwin.ModelCache.</span></span><span class="sig-name descname"><span class="pre">ModelCache</span></span><a class="headerlink" href="#darwin.ModelCache.ModelCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract Model Cache. Describes the interface that must be implemented by every Model Cache.</p>
<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelCache.ModelCache.store_model_run">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">store_model_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelCache.ModelCache.store_model_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a run.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelCache.ModelCache.find_model_run">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find_model_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></span><a class="headerlink" href="#darwin.ModelCache.ModelCache.find_model_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a run by genotype.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelCache.ModelCache.load">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelCache.ModelCache.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the cache from a saved state.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelCache.ModelCache.dump">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelCache.ModelCache.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the cache to a saved state.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.ModelCache.ModelCache.finalize">
<span class="sig-name descname"><span class="pre">finalize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelCache.ModelCache.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize all ongoing activities.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darwin.ModelCache.set_model_cache">
<span class="sig-prename descclassname"><span class="pre">darwin.ModelCache.</span></span><span class="sig-name descname"><span class="pre">set_model_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelCache.set_model_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Set current Model Cache instance. Supposed to be called once at the startup.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darwin.ModelCache.get_model_cache">
<span class="sig-prename descclassname"><span class="pre">darwin.ModelCache.</span></span><span class="sig-name descname"><span class="pre">get_model_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelCache.get_model_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current Model Cache instance.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darwin.ModelCache.register_model_cache">
<span class="sig-prename descclassname"><span class="pre">darwin.ModelCache.</span></span><span class="sig-name descname"><span class="pre">register_model_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mc_class</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.ModelCache.register_model_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Register Model Cache class. <em>cache_name</em> is arbitrary, must be unique among all registered caches.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darwin.ModelCache.create_model_cache">
<span class="sig-prename descclassname"><span class="pre">darwin.ModelCache.</span></span><span class="sig-name descname"><span class="pre">create_model_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache_name</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#darwin.ModelCache.ModelCache" title="darwin.ModelCache.ModelCache"><span class="pre">ModelCache</span></a></span></span><a class="headerlink" href="#darwin.ModelCache.create_model_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Create Model Cache instance. The cache class must be registered under <em>cache_name</em>.</p>
</dd></dl>

</section>
<section id="module-darwin.MemoryModelCache">
<span id="darwin-memorymodelcache"></span><h3>darwin.MemoryModelCache<a class="headerlink" href="#module-darwin.MemoryModelCache" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="darwin.MemoryModelCache.MemoryModelCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">darwin.MemoryModelCache.</span></span><span class="sig-name descname"><span class="pre">MemoryModelCache</span></span><a class="headerlink" href="#darwin.MemoryModelCache.MemoryModelCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#darwin.ModelCache.ModelCache" title="darwin.ModelCache.ModelCache"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelCache</span></code></a></p>
<p>Simple Model Cache that stores model runs in a dictionary. Default option for <code class="docutils literal notranslate"><span class="pre">pyDarwin</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="darwin.MemoryModelCache.MemoryModelCache.store_model_run">
<span class="sig-name descname"><span class="pre">store_model_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#darwin.MemoryModelCache.MemoryModelCache.store_model_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a run.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.MemoryModelCache.MemoryModelCache.find_model_run">
<span class="sig-name descname"><span class="pre">find_model_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">genotype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#darwin.ModelRun.ModelRun" title="darwin.ModelRun.ModelRun"><span class="pre">ModelRun</span></a></span></span><a class="headerlink" href="#darwin.MemoryModelCache.MemoryModelCache.find_model_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a run by genotype.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.MemoryModelCache.MemoryModelCache.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.MemoryModelCache.MemoryModelCache.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the cache from <a class="reference internal" href="Options.html#saved-models-file-options-desc"><span class="std std-ref">saved_models_file</span></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.MemoryModelCache.MemoryModelCache.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.MemoryModelCache.MemoryModelCache.dump" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Save cached runs to file.</div>
<div class="line">Does nothing if <a class="reference internal" href="Options.html#saved-models-readonly-options-desc"><span class="std std-ref">saved_models_readonly</span></a>
is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="darwin.MemoryModelCache.AsyncMemoryModelCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">darwin.MemoryModelCache.</span></span><span class="sig-name descname"><span class="pre">AsyncMemoryModelCache</span></span><a class="headerlink" href="#darwin.MemoryModelCache.AsyncMemoryModelCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#darwin.MemoryModelCache.MemoryModelCache" title="darwin.MemoryModelCache.MemoryModelCache"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryModelCache</span></code></a></p>
<div class="line-block">
<div class="line">Non-blocking MemoryModelCache.</div>
<div class="line">Dumps model runs in a separate thread so <em>dump</em> call doesn’t block the search execution.</div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="darwin.MemoryModelCache.AsyncMemoryModelCache.finalize">
<span class="sig-name descname"><span class="pre">finalize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.MemoryModelCache.AsyncMemoryModelCache.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish the working thread and dump any unsaved model runs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="darwin.MemoryModelCache.AsyncMemoryModelCache.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.MemoryModelCache.AsyncMemoryModelCache.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Signal the working thread that a dump was requested.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darwin.MemoryModelCache.register">
<span class="sig-prename descclassname"><span class="pre">darwin.MemoryModelCache.</span></span><span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#darwin.MemoryModelCache.register" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#darwin.ModelCache.register_model_cache" title="darwin.ModelCache.register_model_cache"><code class="xref py py-data docutils literal notranslate"><span class="pre">Register</span></code></a>
<a class="reference internal" href="#darwin.MemoryModelCache.MemoryModelCache" title="darwin.MemoryModelCache.MemoryModelCache"><code class="xref py py-data docutils literal notranslate"><span class="pre">MemoryModelCache</span></code></a>
and <a class="reference internal" href="#darwin.MemoryModelCache.AsyncMemoryModelCache" title="darwin.MemoryModelCache.AsyncMemoryModelCache"><code class="xref py py-data docutils literal notranslate"><span class="pre">AsyncMemoryModelCache</span></code></a>.</p>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Options.html" class="btn btn-neutral float-left" title="Options List" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Glossary.html" class="btn btn-neutral float-right" title="Glossary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Mark Sale.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>